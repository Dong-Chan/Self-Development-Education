# 文件管理
在本章中，我们将详细讨论Unix中的文件管理。 Unix中的所有数据都组织成文件。所有文件都组织在目录中。这些目录被组织成称为文件系统的树状结构。

当以一种或另一种方式使用Unix时，您将花费大部分时间来处理文件。本教程将帮助您了解如何创建和删除文件，复制和重命名文件，创建指向它们的链接等。

## 在Unix中，文件有三种基本类型-

- 普通文件是系统上包含数据，文本或程序指令的文件。在本教程中，您将研究使用普通文件。

- 目录存储特殊文件和普通文件。对于熟悉Windows或Mac OS的用户，Unix目录等效于文件夹。

- 特殊文件，一些特殊文件提供对硬件的访问，例如硬盘驱动器，CD-ROM驱动器，调制解调器和以太网适配器。其他特殊文件类似于别名或快捷方式，使您可以使用不同的名称访问单个文件。

## 基本操作
### 列出文件
要列出存储在当前目录中的文件和目录，请使用以下命令-
```shell
$ ls
这是上述命令的示例输出-

$ ls

bin主机lib res.03
ch07 hw1 pub test_results
ch07.bak hw2 res.01用户
docs hw3 res.02工作
命令ls支持-l选项，该选项将帮助您获取有关所列文件的更多信息-

$ ls -l
总计1962188

drwxrwxr-x 2 amrood amrood 4096 12月25日09:59 UML
-rw-rw-r-- 1 amrood amrood 5341 12月25日08:38 uml.jpg
drwxr-xr-x 2 amrood amrood 4096 2006年2月15日univ
drwxr-xr-x 2 root root 4096 2007年12月9日urlspedia
-rw-r--r-- 1个根目录276480 2007年12月9日urlspedia.tar
drwxr-xr-x 8 root root 4096 2007年11月25日usr
drwxr-xr-x 2200300 4096 2007年11月25日webthumb-1.01
-rwxr-xr-x 1根目录3192 2007年11月25日webthumb.php
-rw-rw-r-- 1个amrood amrood 20480 2007年11月25日webthumb.tar
-rw-rw-r-- 1个amrood amrood 5654 2007年8月9日yourfile.mid
-rw-rw-r-- 1个amrood amrood 166255 2007年8月9日yourfile.swf
drwxr-xr-x 11 amrood amrood 4096 2007年5月29日zlib-1.2.3
$
```
这是有关所有列出的列的信息-

- 第一列-表示文件类型和文件上的权限。以下是所有文件类型的说明。

-  第二列-表示文件或目录占用的内存块数。

- 第三列-代表文件的所有者。这是创建此文件的Unix用户。

- 第四列-代表所有者的组。每个Unix用户将有一个关联的组。

- 第五列-表示文件大小（以字节为单位）。

-  第六列-表示最后一次创建或修改此文件的日期和时间。

- 第七列-表示文件或目录名称。

在ls -l列出的示例中，每个文件行都以d，-或l开头。这些字符指示列出的文件的类型。

| 前缀  |  说明   |
|---|---|
| -  | 常规文件，例如ASCII文本文件，二进制可执行文件或硬链接。 |
| b  |块文件。输入/输出设备文件，例如物理硬盘驱动器。|
| c  | 字符特殊文件。原始输入/输出设备文件，例如物理硬盘驱动器。| d ｜ 包含其他文件和目录列表的目录文件。｜
｜ l ｜ 符号链接文件。任何常规文件上的链接。|
| p | 命名管道。进程间通信的机制。|
| s | 用于进程间通信的套接字。|



### 元字符
元字符在Unix中具有特殊含义。例如，*和？是元字符。我们使用*匹配0个或更多字符，问号（？）匹配单个字符。

例如-
```shell
$ ls ch * .doc
```
显示所有文件，其名称以ch开头并以.doc结尾-
```shell
ch01-1.doc ch010.doc ch02.doc ch03-2.doc
ch04-1.doc ch040.doc ch05.doc ch06-2.doc
ch01-2.doc ch02-1.doc c
```
在这里，*用作与任何字符匹配的元字符。如果要显示所有仅以.doc结尾的文件，则可以使用以下命令-
```shell
$ ls * .doc
```

#### 隐藏文件
一个不可见文件是一个文件，其第一个字符是点或句点字符（.）. Unix程序（包括shell）使用这些文件中的大多数来存储配置信息。

隐藏文件的一些常见示例包括文件-

- .profile-Bourne shell（sh）初始化脚本

- .kshrc-Korn shell（ksh）初始化脚本

- .cshrc-C外壳（csh）初始化脚本

- .rhosts-远程Shell配置文件

要列出不可见的文件，请为ls指定-a选项-

```shell
$ ls -a

。 .profile文件lib test_results
.. .rhosts主持发布用户
.emacs bin hw1 res.01工作
.exrc ch07 hw2 res.02
.kshrc ch07.bak hw3 res.03
$
```
- 单点（.）-这表示当前目录。

- 双点（..）-这表示父目录。

#### 创建文件
您可以使用vi编辑器在任何Unix系统上创建普通文件。您只需要给出以下命令-

```shell
$ vi filename
```
上面的命令将打开一个具有给定文件名的文件。现在，按键i进入编辑模式。进入编辑模式后，您可以按照以下程序开始在文件中写入内容-

```shell
这是unix文件...我是第一次创建它。
我将把这个内容保存在这个文件中。
```
完成程序后，请按照以下步骤操作：

- 按esc键退出编辑模式。

- 同时按下两个键Shift + ZZ可以完全退出文件。

现在，您将在当前目录中使用filename创建一个文件。


#### 编辑文件
您可以使用vi编辑器编辑现有文件。简而言之，我们将讨论如何打开现有文件-

```shell
$ vi filename
```
打开文件后，您可以通过按i键进入编辑模式，然后可以编辑文件。如果要在文件内四处移动，那么首先需要按Esc键退出编辑模式。之后，您可以使用以下键在文件内移动-

- l键移至右侧。

- h键移至左侧。

- k键可在文件中向上移动。

- 使用j键向下移动文件。

因此，使用上述键，您可以将光标放置在要编辑的任何位置。定位后，即可使用i键进入编辑模式。完成文件中的编辑后，按Esc键，最后同时按Shift + ZZ两个键，可以完全退出文件。

#### 显示文件内容
您可以使用cat命令查看文件的内容。以下是一个简单的示例，可以查看上面创建的文件的内容-
```shell
$ cat filenamme
这是unix文件...我是第一次创建它。
我将把这个内容保存在这个文件中。
$
```
您可以使用-b选项和cat命令来显示行号，如下所示：

```shell
$ cat -b filename
1这是unix文件...我是第一次创建它。
2我将把此内容保存在此文件中。
$
```

#### 计数文件中的单词
您可以使用wc命令获取文件中包含的行，单词和字符的总数。以下是一个简单的示例，以查看有关上面创建的文件的信息-
```shell
$ wc filename
2 19 103 filename
$
```
这是所有四列的详细信息-

- 第一列-表示文件中的总行数。

- 第二列-表示文件中的单词总数。

- 第三列-表示文件中的字节总数。这是文件的实际大小。

- 第四列-表示文件名。

您可以一次提供多个文件并获取有关这些文件的信息。以下是简单的语法-

```shell
$ wc filename1 filename2 filename3
```

#### 复制文件
要复制文件，请使用cp命令。该命令的基本语法是-
```shell
$ cp source_file destination_file
```
以下是创建现有文件文件名副本的示例。
```shell
$ cp filename copyfile
$
```

现在，您将在当前目录中找到另一个文件copyfile。该文件将与原始文件名完全相同。

#### 重命名文件
要更改文件名，请使用mv命令。以下是基本语法-
```shell
$ mv old_file new_file
```
下面的程序会将现有文件的文件名重命名为newfile。
```shell
$ mv filename newfile
$
```
mv命令会将现有文件完全移动到新文件中。在这种情况下，您将在当前目录中仅找到newfile。

#### 删除文件
要删除现有文件，请使用rm命令。以下是基本语法-
```shell
$ rm filename
```
注意-文件可能包含有用的信息。始终建议在使用此Delete命令时要小心。最好将-i选项与rm命令一起使用。

以下是显示如何完全删除现有文件文件名的示例。
```shell 
$ rm filename
$
```
您可以使用下面给出的命令一次删除多个文件-
```shell
$ rm filename1 filename2 filename3
$
```

#### 标准Unix流
在正常情况下，每个Unix程序启动时都会为其打开三个流（文件）-

- stdin-称为标准输入，关联的文件描述符为0。这也表示为STDIN。 Unix程序将从STDIN读取默认输入。

- stdout-这称为标准输出，关联的文件描述符为1。这也表示为STDOUT。 Unix程序将在STDOUT写入默认输出

- stderr-这被称为标准错误，并且相关的文件描述符为2。这也表示为STDERR。 Unix程序将在STDERR上写入所有错误消息。